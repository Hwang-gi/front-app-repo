# name: Docker Image Build and Push to AWS ECR

# on:
#   push:
#     branches:
#       - main  # 'main' 브랜치에 푸시될 때 워크플로우가 실행됩니다.
#   pull_request:
#     branches:
#       - main  # PR이 main 브랜치로 생성될 때 워크플로우가 실행됩니다.

# jobs:
#   build-and-push:
#     runs-on: ubuntu-latest  # GitHub Actions에서 제공하는 Ubuntu 최신 버전에서 실행

#     steps:
#       # 1. 코드 체크아웃
#       - name: Checkout code
#         uses: actions/checkout@v2

#       # 2. AWS 자격 증명 설정
#       - name: Set up AWS CLI
#         uses: aws-actions/configure-aws-credentials@v1
#         with:
#           aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}  # GitHub Secrets에 저장된 AWS Access Key
#           aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}  # GitHub Secrets에 저장된 AWS Secret Key
#           aws-region: ${{ secrets.AWS_REGION }}  # AWS 지역 (예: us-west-2)

#       # 3. AWS ECR 로그인
#       - name: Login to Amazon ECR
#         uses: aws-actions/amazon-ecr-login@v1

#       # 4. Docker 이미지 빌드
#       - name: Build Docker image
#         run: |
#           docker build -t ${{ secrets.AWS_ACCOUNT_ID }}.dkr.ecr.${{ secrets.AWS_REGION }}.amazonaws.com/${{ secrets.AWS_ECR_REPOSITORY_NAME }}:latest .

#       # 5. Docker 이미지 푸시
#       - name: Push Docker image to AWS ECR
#         run: |
#           docker push ${{ secrets.AWS_ACCOUNT_ID }}.dkr.ecr.${{ secrets.AWS_REGION }}.amazonaws.com/${{ secrets.AWS_ECR_REPOSITORY_NAME }}:latest
